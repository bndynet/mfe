(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[592],{898:(K,L,h)=>{h.r(L),h.d(L,{AUTH_CONFIG:()=>d,AUTH_FEATURE_KEY:()=>y,AUTH_SERVICE:()=>p,Auth0Service:()=>H,AuthActionTypes:()=>u,AuthEffects:()=>I,AuthGuard:()=>D,AuthService:()=>$,DataModule:()=>V,KEY_BACK_URL:()=>b,LayoutService:()=>B,MenuService:()=>G,MyAuthService:()=>C,UserInfo:()=>O,authProvider:()=>U,authReducer:()=>E,checkLogin:()=>k,getAuthError:()=>T,getAuthState:()=>w,initialAuthState:()=>M,login:()=>j,loginFailure:()=>S,loginSuccess:()=>g,logout:()=>F,logoutComplete:()=>f});var n=h(1531),u=(()=>{return(e=u||(u={})).Login="[Login Page] Login",e.LoginComplete="[Login Page] Login Complete",e.LoginSuccess="[Auth API] Login Success",e.LoginFailure="[Auth API] Login Failure",e.CheckLogin="[Auth] Check Login",e.Logout="[Auth] Confirm Logout",e.LogoutComplete="[Auth] Logout Complete",u;var e})();const j=(0,n.createAction)(u.Login,(0,n.props)()),g=(0,n.createAction)(u.LoginSuccess,(0,n.props)()),S=(0,n.createAction)(u.LoginFailure,(0,n.props)()),k=(0,n.createAction)(u.CheckLogin),F=(0,n.createAction)(u.Logout,n.props),f=(0,n.createAction)(u.LogoutComplete);var l=h(6776),i=h(3970),A=h(3902),r=h(8944),m=h(2580);const d=new r.InjectionToken("auth.config");class O extends m.User{}class ${constructor(s,t){this.httpClient=s,this.authConfig=t}}const b="backUrl";let C=(()=>{class e extends ${constructor(t,c){super(t,c),this.user$=new i.BehaviorSubject(null),this.isAuthenticated$=new i.BehaviorSubject(!1),this.isLoggedIn$=this.user$.pipe((0,i.map)(o=>!!o)),this.isLoading$=new i.Subject}getId(){return e.id}isAuthenticated(){return console.log(this),this.isAuthenticated$}login(t){return t.pageUrl&&(this.loginPageUrl=t.pageUrl),t.requestUrl?("get"===t.requestMethod?this.httpClient.get(t.requestUrl):this.httpClient.post(t.requestUrl,t.requestBody)).pipe((0,i.map)(o=>(this.user$.next(o),this.user$.complete(),this.isAuthenticated$.next(!0),o))):(0,i.throwError)(()=>new Error("Username is required."))}getUser(){return this.user$}getAccessToken(){return this.user$.pipe((0,i.map)(t=>""))}logout(t){this.user$.next(null),this.user$.complete(),this.isAuthenticated$.next(!1)}}return e.id="my.auth",e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(A.HttpClient),r.\u0275\u0275inject(d))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const p=new r.InjectionToken("auth.service"),U={provide:p,useClass:C,deps:[A.HttpClient,d,m.AuthService]};let I=(()=>{class e{constructor(t,c){this.actions$=t,this.authService=c,this.login$=(0,l.createEffect)(()=>this.actions$.pipe((0,l.ofType)(u.Login),(0,i.switchMap)(o=>this.authService.login(o).pipe((0,i.map)(a=>g(a)),(0,i.catchError)(a=>(0,i.of)(S({error:a}))))))),this.logout$=(0,l.createEffect)(()=>this.actions$.pipe((0,l.ofType)(u.Logout),(0,i.switchMap)(()=>{const o=this.authService.logout();return o instanceof i.Observable?o.pipe((0,i.map)(()=>f())):(0,i.of)(f())})))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(l.Actions),r.\u0275\u0275inject(p))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const y="auth",M={isAuthenticated:!1,user:void 0},x=(0,n.createReducer)(M,(0,n.on)(j,e=>({...e,loaded:!1})),(0,n.on)(g,(e,s)=>({...e,isAuthenticated:!0,user:s})),(0,n.on)(S,(e,{error:s})=>({...e,error:s,isAuthenticated:!1})),(0,n.on)(f,e=>M));function E(e,s){return x(e,s)}const w=(0,n.createFeatureSelector)(y),T=(0,n.createSelector)(w,e=>e.error);var R=h(5294);let D=(()=>{class e{constructor(t,c){this.router=t,this.authService=c}canActivate(t,c){return this.authService.isAuthenticated$.pipe((0,i.map)(o=>{if(!o){let a=this.authService.authConfig.loginPageUrl||"/login";a=a.includes("?")?`${a}&${b}=${c.url}`:`${a}?${b}=${c.url}`,this.router.navigateByUrl(a)}return o}))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(R.Router),r.\u0275\u0275inject(p))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),H=(()=>{class e extends ${constructor(t,c,o,a){super(t,c),this.auth0=o,this.store=a,this.user$=this.auth0.user$,this.isAuthenticated$=this.auth0.isAuthenticated$,this.isLoggedIn$=this.auth0.user$.pipe((0,i.map)(v=>!!v)),this.isLoading$=this.auth0.isLoading$,this.auth0.user$.subscribe(v=>{v&&this.store.dispatch(g(v))})}getId(){return e.id}isAuthenticated(){return this.auth0.isAuthenticated$}login(t){return this.auth0.loginWithRedirect({redirect_uri:location.href,appState:{target:t.backUrl||"/"}}).pipe((0,i.switchMap)(()=>(0,i.throwError)(()=>new Error("Redirection to server..."))))}getAccessToken(){return this.auth0.getAccessTokenSilently()}logout(t){this.auth0.logout({returnTo:t})}getUser(){return this.auth0.user$}}return e.id="auth0",e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(A.HttpClient),r.\u0275\u0275inject(d),r.\u0275\u0275inject(m.AuthService),r.\u0275\u0275inject(n.Store))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var P=h(417);let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({providers:[U],imports:[P.CommonModule,n.StoreModule.forFeature(y,E),l.EffectsModule.forFeature([I])]}),e})(),B=(()=>{class e{constructor(){this.config={ripple:!1,inputStyle:"outlined",menuMode:"static",colorScheme:"light",theme:"lara-light-indigo",scale:14},this.state={staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1},this.configUpdate=new i.Subject,this.overlayOpen=new i.Subject,this.configUpdate$=this.configUpdate.asObservable(),this.overlayOpen$=this.overlayOpen.asObservable()}onMenuToggle(){this.isOverlay()&&(this.state.overlayMenuActive=!this.state.overlayMenuActive,this.state.overlayMenuActive&&this.overlayOpen.next(null)),this.isDesktop()?this.state.staticMenuDesktopInactive=!this.state.staticMenuDesktopInactive:(this.state.staticMenuMobileActive=!this.state.staticMenuMobileActive,this.state.staticMenuMobileActive&&this.overlayOpen.next(null))}onOverlaySubmenuOpen(){this.overlayOpen.next(null)}showProfileSidebar(){this.state.profileSidebarVisible=!this.state.profileSidebarVisible,this.state.profileSidebarVisible&&this.overlayOpen.next(null)}showConfigSidebar(){this.state.configSidebarVisible=!0}isOverlay(){return"overlay"===this.config.menuMode}isDesktop(){return window.innerWidth>991}isMobile(){return!this.isDesktop()}onConfigUpdate(){this.configUpdate.next(this.config)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),G=(()=>{class e{constructor(){this.menuSource=new i.Subject,this.resetSource=new i.Subject,this.menuSource$=this.menuSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onMenuStateChange(t){this.menuSource.next(t)}reset(){this.resetSource.next(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);