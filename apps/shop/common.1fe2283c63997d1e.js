(self.webpackChunkshop=self.webpackChunkshop||[]).push([[592],{7866:(T,S,s)=>{s.r(S),s.d(S,{RemoteEntryModule:()=>r});var i=s(417),$=s(5294),t=s(8944),d=s(9190),a=s(6776),j=s(1531),g=s(3970),A=s(2264);function I(n,h){if(1&n){const c=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"mfe-welcome",1),t.\u0275\u0275listener("logoutHandler",function(){t.\u0275\u0275restoreView(c);const v=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(v.logout())}),t.\u0275\u0275elementEnd()()}if(2&n){const c=h.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Hi "+c.name)("showLogoutButton",!0)}}let E=(()=>{class n{constructor(c,m,v){this.router=c,this.actions$=m,this.store=v,this.userInfo$=this.store.select(d.getAuthState).pipe((0,g.map)(C=>C.user)),this.destroyed$=new g.Subject}ngOnInit(){this.actions$.pipe((0,a.ofType)(d.logoutComplete),(0,g.takeUntil)(this.destroyed$)).subscribe(()=>{this.router.navigateByUrl("/")})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}logout(){this.store.dispatch((0,d.logout)())}}return n.\u0275fac=function(c){return new(c||n)(t.\u0275\u0275directiveInject($.Router),t.\u0275\u0275directiveInject(a.Actions),t.\u0275\u0275directiveInject(j.Store))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["mfe-nx-welcome"]],decls:2,vars:3,consts:[[4,"ngIf"],["bg","#086978",3,"title","showLogoutButton","logoutHandler"]],template:function(c,m){1&c&&(t.\u0275\u0275template(0,I,2,2,"div",0),t.\u0275\u0275pipe(1,"async")),2&c&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,m.userInfo$))},dependencies:[i.NgIf,A.WelcomeComponent,i.AsyncPipe],encapsulation:2}),n})(),y=(()=>{class n{}return n.\u0275fac=function(c){return new(c||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["mfe-shop-entry"]],decls:1,vars:0,template:function(c,m){1&c&&t.\u0275\u0275element(0,"mfe-nx-welcome")},dependencies:[E],encapsulation:2}),n})(),r=(()=>{class n{}return n.\u0275fac=function(c){return new(c||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[i.CommonModule,A.UiModule,d.DataModule,$.RouterModule.forChild([{path:"",component:y}])]}),n})()},9165:(T,S,s)=>{s.r(S),s.d(S,{AUTH_CONFIG:()=>c,AUTH_FEATURE_KEY:()=>U,AUTH_SERVICE:()=>M,Auth0Service:()=>V,AuthActionTypes:()=>a,AuthEffects:()=>w,AuthGuard:()=>P,AuthService:()=>v,DataModule:()=>k,KEY_BACK_URL:()=>C,LayoutService:()=>B,MyAuthService:()=>b,UserInfo:()=>m,authProvider:()=>R,authReducer:()=>F,checkLogin:()=>I,getAuthError:()=>D,getAuthState:()=>O,initialAuthState:()=>x,login:()=>j,loginFailure:()=>A,loginSuccess:()=>g,logout:()=>E,logoutComplete:()=>y});var i=s(8944),$=s(417),t=s(1531),d=s(6776),a=(()=>{return(e=a||(a={})).Login="[Login Page] Login",e.LoginComplete="[Login Page] Login Complete",e.LoginSuccess="[Auth API] Login Success",e.LoginFailure="[Auth API] Login Failure",e.CheckLogin="[Auth] Check Login",e.Logout="[Auth] Confirm Logout",e.LogoutComplete="[Auth] Logout Complete",a;var e})();const j=(0,t.createAction)(a.Login,(0,t.props)()),g=(0,t.createAction)(a.LoginSuccess,(0,t.props)()),A=(0,t.createAction)(a.LoginFailure,(0,t.props)()),I=(0,t.createAction)(a.CheckLogin),E=(0,t.createAction)(a.Logout,t.props),y=(0,t.createAction)(a.LogoutComplete);var r=s(3970),n=s(3902),h=s(2580);const c=new i.InjectionToken("auth.config");class m extends h.User{}class v{constructor(u,o){this.httpClient=u,this.authConfig=o}}const C="backUrl";let b=(()=>{class e extends v{constructor(o,p){super(o,p),this.user$=new r.BehaviorSubject(null),this.isAuthenticated$=new r.BehaviorSubject(!1),this.isLoggedIn$=this.user$.pipe((0,r.map)(l=>!!l)),this.isLoading$=new r.Subject}getId(){return e.id}isAuthenticated(){return console.log(this),this.isAuthenticated$}login(o){return o.pageUrl&&(this.loginPageUrl=o.pageUrl),o.requestUrl?("get"===o.requestMethod?this.httpClient.get(o.requestUrl):this.httpClient.post(o.requestUrl,o.requestBody)).pipe((0,r.map)(l=>(this.user$.next(l),this.user$.complete(),this.isAuthenticated$.next(!0),l))):(0,r.throwError)(()=>new Error("Username is required."))}getUser(){return this.user$}getAccessToken(){return this.user$.pipe((0,r.map)(o=>""))}logout(o){this.user$.next(null),this.user$.complete(),this.isAuthenticated$.next(!1)}}return e.id="my.auth",e.\u0275fac=function(o){return new(o||e)(i.\u0275\u0275inject(n.HttpClient),i.\u0275\u0275inject(c))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const M=new i.InjectionToken("auth.service"),R={provide:M,useClass:b,deps:[n.HttpClient,c,h.AuthService]};let w=(()=>{class e{constructor(o,p){this.actions$=o,this.authService=p,this.login$=(0,d.createEffect)(()=>this.actions$.pipe((0,d.ofType)(a.Login),(0,r.switchMap)(l=>this.authService.login(l).pipe((0,r.map)(f=>g(f)),(0,r.catchError)(f=>(0,r.of)(A({error:f}))))))),this.logout$=(0,d.createEffect)(()=>this.actions$.pipe((0,d.ofType)(a.Logout),(0,r.switchMap)(()=>{const l=this.authService.logout();return l instanceof r.Observable?l.pipe((0,r.map)(()=>y())):(0,r.of)(y())})))}}return e.\u0275fac=function(o){return new(o||e)(i.\u0275\u0275inject(d.Actions),i.\u0275\u0275inject(M))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const U="auth",x={isAuthenticated:!1,user:void 0},H=(0,t.createReducer)(x,(0,t.on)(j,e=>({...e,loaded:!1})),(0,t.on)(g,(e,u)=>({...e,isAuthenticated:!0,user:u})),(0,t.on)(A,(e,{error:u})=>({...e,error:u,isAuthenticated:!1})),(0,t.on)(y,e=>x));function F(e,u){return H(e,u)}const O=(0,t.createFeatureSelector)(U),D=(0,t.createSelector)(O,e=>e.error);var N=s(5294);let P=(()=>{class e{constructor(o,p){this.router=o,this.authService=p}canActivate(o,p){return this.authService.isAuthenticated$.pipe((0,r.map)(l=>{if(!l){let f=this.authService.authConfig.loginPageUrl||"/login";f=f.includes("?")?`${f}&${C}=${p.url}`:`${f}?${C}=${p.url}`,this.router.navigateByUrl(f)}return l}))}}return e.\u0275fac=function(o){return new(o||e)(i.\u0275\u0275inject(N.Router),i.\u0275\u0275inject(M))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),V=(()=>{class e extends v{constructor(o,p,l,f){super(o,p),this.auth0=l,this.store=f,this.user$=this.auth0.user$,this.isAuthenticated$=this.auth0.isAuthenticated$,this.isLoggedIn$=this.auth0.user$.pipe((0,r.map)(L=>!!L)),this.isLoading$=this.auth0.isLoading$,this.auth0.user$.subscribe(L=>{L&&this.store.dispatch(g(L))})}getId(){return e.id}isAuthenticated(){return this.auth0.isAuthenticated$}login(o){return this.auth0.loginWithRedirect({redirect_uri:location.href,appState:{target:o.backUrl||"/"}}).pipe((0,r.switchMap)(()=>(0,r.throwError)(()=>new Error("Redirection to server..."))))}getAccessToken(){return this.auth0.getAccessTokenSilently()}logout(o){this.auth0.logout({returnTo:o})}getUser(){return this.auth0.user$}}return e.id="auth0",e.\u0275fac=function(o){return new(o||e)(i.\u0275\u0275inject(n.HttpClient),i.\u0275\u0275inject(c),i.\u0275\u0275inject(h.AuthService),i.\u0275\u0275inject(t.Store))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[R],imports:[$.CommonModule,t.StoreModule.forFeature(U,F),d.EffectsModule.forFeature([w])]}),e})(),B=(()=>{class e{constructor(){this.config={ripple:!1,inputStyle:"outlined",menuMode:"static",colorScheme:"light",theme:"lara-light-indigo",scale:14},this.state={staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1},this.configUpdate=new r.Subject,this.overlayOpen=new r.Subject,this.configUpdate$=this.configUpdate.asObservable(),this.overlayOpen$=this.overlayOpen.asObservable()}onMenuToggle(){this.isOverlay()&&(this.state.overlayMenuActive=!this.state.overlayMenuActive,this.state.overlayMenuActive&&this.overlayOpen.next(null)),this.isDesktop()?this.state.staticMenuDesktopInactive=!this.state.staticMenuDesktopInactive:(this.state.staticMenuMobileActive=!this.state.staticMenuMobileActive,this.state.staticMenuMobileActive&&this.overlayOpen.next(null))}onOverlaySubmenuOpen(){this.overlayOpen.next(null)}showProfileSidebar(){this.state.profileSidebarVisible=!this.state.profileSidebarVisible,this.state.profileSidebarVisible&&this.overlayOpen.next(null)}showConfigSidebar(){this.state.configSidebarVisible=!0}isOverlay(){return"overlay"===this.config.menuMode}isDesktop(){return window.innerWidth>991}isMobile(){return!this.isDesktop()}onConfigUpdate(){this.configUpdate.next(this.config)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);